/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.30/esri/copyright.txt for details.
*/
import{deg2rad as r}from"../../core/mathUtils.js";import{fromTranslation as t,identity as o}from"../../core/libs/gl-matrix-2/math/mat4.js";import{create as i}from"../../core/libs/gl-matrix-2/factories/vec3f64.js";import{computeENUToSphericalPCPFLocalRotation as l,computeSphericalPCPFToENULocalRotation as n}from"./localRotationUtils.js";import{classifySpatialReference as s,sourceClassificationCache as E,destClassificationCache as e,ProjectionID as m,projectionTable as C}from"./projectors.js";import{equals as f}from"../support/spatialReferenceUtils.js";function u(r,i,u,_){if(null==r||null==_)return!1;const p=s(r,E),a=s(_,e);if(p===a&&!c(a)&&(p!==m.UNKNOWN||f(r,_)))return t(u,i),!0;if(c(a)){const r=C[p][m.LON_LAT],t=C[m.LON_LAT][a];return null!=r&&null!=t&&(r(i,0,L,0),t(L,0,R,0),l(A*L[0],A*L[1],u),u[12]=R[0],u[13]=R[1],u[14]=R[2],!0)}if(!(a!==m.WEB_MERCATOR&&a!==m.PLATE_CARREE&&a!==m.WGS84&&a!==m.CGCS2000||p!==m.WGS84&&p!==m.SPHERICAL_ECEF&&p!==m.WEB_MERCATOR&&p!==m.CGCS2000)){const r=C[p][m.LON_LAT],t=C[m.LON_LAT][a];return null!=r&&null!=t&&(r(i,0,L,0),t(L,0,R,0),p===m.SPHERICAL_ECEF?n(A*L[0],A*L[1],u):o(u),u[12]=R[0],u[13]=R[1],u[14]=R[2],!0)}return!1}function c(r){return r===m.SPHERICAL_ECEF||r===m.SPHERICAL_MARS_PCPF||r===m.SPHERICAL_MOON_PCPF}const A=r(1),L=i(),R=i();export{u as computeTranslationToOriginAndRotation};
