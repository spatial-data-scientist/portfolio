/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.30/esri/copyright.txt for details.
*/
import{_ as e}from"../../chunks/tslib.es6.js";import{deprecatedProperty as t}from"../../core/deprecate.js";import i from"../../core/Logger.js";import{watch as s}from"../../core/reactiveUtils.js";import{generateUID as o}from"../../core/uid.js";import{property as r}from"../../core/accessorSupport/decorators/property.js";import"../../core/has.js";import"../../core/RandomLCG.js";import{subclass as n}from"../../core/accessorSupport/decorators/subclass.js";import{isFieldInput as p}from"./featureFormUtils.js";import a from"./InputBase.js";let l=class extends a{constructor(e){super(e),this._expressionTrackingHandles=new Map,this.id=o().toString(),this.type="group"}initialize(){this.addHandles([s((()=>[this.visible,this.inputs]),(([e])=>{const{inputs:t}=this,i=!!e&&void 0;for(const s of t)p(s)&&(s.required=i)}),{initial:!0,equals:(e,t)=>t[0]===e[0]&&t[1]===e[1]})])}destroy(){for(const e of this._expressionTrackingHandles.values())e.remove()}get initialState(){return this.element.initialState||"expanded"}get inputs(){return this._get("inputs")}set inputs(e){this.removeAllHandles(),e&&this.addHandles(e.map((e=>s((()=>e.visible),(()=>this._dirtyEvaluatedVisibilityExpression()))))),this._set("inputs",e)}get label(){return this.element.label}set label(e){const{element:t}=this;t&&(t.label=e)}get open(){return"expanded"===this.initialState}set open(e){this._override("open",e)}get state(){return t(i.getLogger(this),"state",{replacement:"open",version:"4.28",warnOnce:!0}),this.open?"expanded":"collapsed"}set state(e){t(i.getLogger(this),"state",{replacement:"open",version:"4.28",warnOnce:!0}),this.open="expanded"===e}get visible(){return!1!==this.evaluatedVisibilityExpression&&this.inputs&&this.inputs.some((e=>e.visible))}_dirtyEvaluatedVisibilityExpression(){const{element:e}=this;e.visibilityExpression&&this.notifyChange("evaluatedVisibilityExpression")}};e([r()],l.prototype,"id",void 0),e([r()],l.prototype,"initialState",null),e([r()],l.prototype,"inputs",null),e([r()],l.prototype,"label",null),e([r()],l.prototype,"open",null),e([r()],l.prototype,"type",void 0),e([r()],l.prototype,"visible",null),l=e([n("esri.widgets.FeatureForm.GroupInput")],l);const u=l;export{u as default};
