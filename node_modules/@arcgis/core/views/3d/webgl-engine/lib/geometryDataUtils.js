/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.30/esri/copyright.txt for details.
*/
import{s as t,g as e,j as n,F as r}from"../../../../chunks/vec32.js";import{create as s}from"../../../../core/libs/gl-matrix-2/factories/vec3f64.js";import{areaPoints3d as o}from"../../../../geometry/support/triangle.js";function i(r,s){if(!r)return!1;const{size:i,data:c,indices:f}=r;t(s,0,0,0),t(m,0,0,0);let g=0,d=0;for(let p=0;p<f.length-2;p+=3){const r=f[p]*i,h=f[p+1]*i,j=f[p+2]*i;t(a,c[r],c[r+1],c[r+2]),t(l,c[h],c[h+1],c[h+2]),t(u,c[j],c[j+1],c[j+2]);const z=o(a,l,u);z?(e(a,a,l),e(a,a,u),n(a,a,1/3*z),e(s,s,a),g+=z):(e(m,m,a),e(m,m,l),e(m,m,u),d+=3)}return(0!==d||0!==g)&&(0!==g?(n(s,s,1/g),!0):0!==d&&(n(s,m,1/d),!0))}function c(e,r){if(!e)return!1;const{size:s,data:o,indices:i}=e;t(r,0,0,0);let c=-1,f=0;for(let t=0;t<i.length;t++){const e=i[t]*s;c!==e&&(r[0]+=o[e],r[1]+=o[e+1],r[2]+=o[e+2],f++),c=e}return f>1&&n(r,r,1/f),f>0}function f(s,o,i){if(!s)return!1;t(i,0,0,0),t(m,0,0,0);let c=0,f=0;const{size:u,data:g,indices:d}=s,p=d.length-1,h=p+(o?2:0);for(let t=0;t<h;t+=2){const s=t<p?t+1:0,o=d[t<p?t:p]*u,h=d[s]*u;a[0]=g[o],a[1]=g[o+1],a[2]=g[o+2],l[0]=g[h],l[1]=g[h+1],l[2]=g[h+2],n(a,e(a,a,l),.5);const j=r(a,l);j>0?(e(i,i,n(a,a,j)),c+=j):0===c&&(e(m,m,a),f++)}return 0!==c?(n(i,i,1/c),!0):0!==f&&(n(i,m,1/f),!0)}const a=s(),l=s(),u=s(),m=s();export{f as computeAttachmentOriginLines,c as computeAttachmentOriginPoints,i as computeAttachmentOriginTriangles};
