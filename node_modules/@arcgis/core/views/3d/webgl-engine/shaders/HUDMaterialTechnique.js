/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.30/esri/copyright.txt for details.
*/
import{ViewingMode as r}from"../../../ViewingMode.js";import{ShaderOutput as e}from"../core/shaderLibrary/ShaderOutput.js";import{ReloadableShaderModule as i}from"../core/shaderTechnique/ReloadableShaderModule.js";import{ShaderTechnique as t}from"../core/shaderTechnique/ShaderTechnique.js";import{Default3D as o}from"../lib/DefaultVertexAttributeLocations.js";import{oitBlending as n,oitDrawBuffers as s}from"../lib/OrderIndependentTransparency.js";import{Program as a}from"../lib/Program.js";import{TransparencyPassType as l}from"../lib/TransparencyPassType.js";import{H as u}from"../../../../chunks/HUDMaterial.glsl.js";import{BlendFactor as p,CompareFunction as c,PrimitiveType as d}from"../../../webgl/enums.js";import{simpleBlendingParams as m,defaultDepthWriteParams as f,makePipelineState as h,defaultColorWriteParams as g}from"../../../webgl/renderState.js";class b extends t{initializeConfiguration(e,i){i.spherical=e.viewingMode===r.Global}initializeProgram(r){return new a(r.rctx,b.shader.get().build(this.configuration),o)}initializePipeline(){const r=this.configuration.transparencyPassType,i=this.configuration,t=r===l.NONE,o=r===l.FrontFace,a=this.configuration.hasPolygonOffset?j:null,u=i.draped?null:(t||o)&&i.output!==e.Highlight&&(i.depthEnabled||i.occlusionPass)?f:null;return h({blending:i.output===e.Color||i.output===e.Highlight?t?T:n(r):null,depthTest:i.draped?null:{func:c.LEQUAL},depthWrite:u,drawBuffers:s(r),colorWrite:g,polygonOffset:a})}get primitiveType(){return this.configuration.occlusionPass?d.POINTS:d.TRIANGLES}}b.shader=new i(u,(()=>import("./HUDMaterial.glsl.js")));const j={factor:0,units:-4},T=m(p.ONE,p.ONE_MINUS_SRC_ALPHA);export{b as HUDMaterialTechnique};
