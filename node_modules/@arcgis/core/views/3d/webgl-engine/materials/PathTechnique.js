/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.30/esri/copyright.txt for details.
*/
import{_ as e}from"../../../../chunks/tslib.es6.js";import{fromValues as o,create as t}from"../../../../core/libs/gl-matrix-2/factories/vec3f64.js";import{ViewingMode as r}from"../../../ViewingMode.js";import{ShaderOutput as i}from"../core/shaderLibrary/ShaderOutput.js";import{PathVertexPositionPassParameters as s}from"../core/shaderLibrary/attributes/PathVertexPosition.glsl.js";import{NormalsDoubleSidedMode as n}from"../core/shaderLibrary/shading/Normals.glsl.js";import{PBRMode as a}from"../core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js";import{ReloadableShaderModule as l}from"../core/shaderTechnique/ReloadableShaderModule.js";import{ShaderTechnique as p}from"../core/shaderTechnique/ShaderTechnique.js";import{parameter as c}from"../core/shaderTechnique/ShaderTechniqueConfiguration.js";import{blendingDefault as u,oitBlending as d,oitDepthTest as h,oitDrawBuffers as m,OITPolygonOffset as v}from"../lib/OrderIndependentTransparency.js";import{Program as f}from"../lib/Program.js";import{stencilWriteMaskOn as b,stencilBaseAllZerosParams as y}from"../lib/StencilUtils.js";import{TransparencyPassType as O}from"../lib/TransparencyPassType.js";import{VertexAttribute as g}from"../lib/VertexAttribute.js";import{DefaultTechniqueConfiguration as P}from"./DefaultTechniqueConfiguration.js";import{P as T}from"../../../../chunks/Path.glsl.js";import{SpecialDrawBuffers as j}from"../../../webgl/enums.js";import{makePipelineState as S,frontFaceCullingParams as E,defaultDepthWriteParams as N,defaultColorWriteParams as R}from"../../../webgl/renderState.js";const C=new Map([[g.POSITION,0],[g.PROFILERIGHT,1],[g.PROFILEUP,2],[g.PROFILEVERTEXANDNORMAL,3],[g.FEATUREVALUE,4],[g.OBJECTANDLAYERIDCOLOR,5]]);class L extends s{constructor(){super(...arguments),this.ambient=o(.2,.2,.2),this.diffuse=o(.8,.8,.8),this.specular=o(0,0,0),this.opacity=1,this.origin=t(),this.modelTransformation=null}}class A extends p{initializeConfiguration(e,o){o.spherical=e.viewingMode===r.Global,o.doublePrecisionRequiresObfuscation=e.rctx.driverTest.doublePrecisionRequiresObfuscation.result}initializeProgram(e){return new f(e.rctx,A.shader.get().build(this.configuration),C)}initializePipeline(){const e=this.configuration.transparencyPassType,o=this.configuration,t=e===O.NONE,r=e===O.FrontFace;return S({blending:o.output===i.Color&&o.transparent?t?u:d(e):null,culling:o.hasSlicePlane&&!o.transparent&&o.doubleSidedMode!==n.None?E:null,depthTest:{func:h(e)},depthWrite:t||r?N:null,drawBuffers:o.output===i.Depth?{buffers:[j.NONE]}:m(e),colorWrite:R,stencilWrite:o.hasOccludees?b:null,stencilTest:o.hasOccludees?y:null,polygonOffset:t||r?null:v})}}A.shader=new l(T,(()=>import("../shaders/Path.glsl.js")));class V extends P{constructor(){super(...arguments),this.output=i.Color,this.doubleSidedMode=n.None,this.transparencyPassType=O.NONE,this.spherical=!1,this.receiveShadows=!1,this.receiveAmbientOcclusion=!1,this.vvSize=!1,this.vvColor=!1,this.vvOpacity=!1,this.hasSlicePlane=!1,this.transparent=!1,this.hasOccludees=!1,this.multipassEnabled=!1,this.cullAboveGround=!1,this.doublePrecisionRequiresObfuscation=!1,this.objectAndLayerIdColorInstanced=!1}}e([c({count:i.COUNT})],V.prototype,"output",void 0),e([c({count:n.COUNT})],V.prototype,"doubleSidedMode",void 0),e([c({count:O.COUNT})],V.prototype,"transparencyPassType",void 0),e([c()],V.prototype,"spherical",void 0),e([c()],V.prototype,"receiveShadows",void 0),e([c()],V.prototype,"receiveAmbientOcclusion",void 0),e([c()],V.prototype,"vvSize",void 0),e([c()],V.prototype,"vvColor",void 0),e([c()],V.prototype,"vvOpacity",void 0),e([c()],V.prototype,"hasSlicePlane",void 0),e([c()],V.prototype,"transparent",void 0),e([c()],V.prototype,"hasOccludees",void 0),e([c()],V.prototype,"multipassEnabled",void 0),e([c()],V.prototype,"cullAboveGround",void 0),e([c()],V.prototype,"doublePrecisionRequiresObfuscation",void 0),e([c({constValue:!1})],V.prototype,"occlusionPass",void 0),e([c({constValue:a.Disabled})],V.prototype,"pbrMode",void 0),e([c({constValue:!0})],V.prototype,"hasVvInstancing",void 0),e([c({constValue:!1})],V.prototype,"useCustomDTRExponentForWater",void 0),e([c({constValue:!1})],V.prototype,"useFillLights",void 0),e([c({constValue:!1})],V.prototype,"hasColorTexture",void 0);export{L as PathPassParameters,A as PathTechnique,V as PathTechniqueConfiguration,C as vertexAttributeLocations};
