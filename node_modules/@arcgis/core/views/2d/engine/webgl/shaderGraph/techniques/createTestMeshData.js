/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.30/esri/copyright.txt for details.
*/
import"../../../../../../geometry.js";import{getJsonType as e}from"../../../../../../geometry/support/jsonUtils.js";import t from"../../../../../../layers/support/FieldsIndex.js";import{MeshData as r}from"../../mesh/MeshData.js";import{createMeshWriter as o}from"./createMeshWriter.js";import{AResourceProxy as s}from"./mesh/AResourceProxy.js";import{ComputedAttributeStorage as n}from"../../../../layers/features/support/ComputedAttributeStorage.js";import{FeatureMetadata as i}from"../../../../layers/features/support/FeatureMetadata.js";import{FeatureSetReaderJSON as m}from"../../../../layers/features/support/FeatureSetReaderJSON.js";import a from"../../../../../../geometry/SpatialReference.js";async function l(s){const l=new r("0.0.0.0"),p=new u,d={},f={fields:new t,spatialReference:a.WebMercator},c={$view:{scale:0,timeZone:null}},y=new n(f);for(const t of s){const r=await o(y,p,d,t.instanceId,t.meshParams,t.meshWriterClass);t.feature.displayId=t.feature.attributes.objectId;const s=m.fromFeatures([t.feature],new i({fields:[],objectIdField:"objectId",geometryType:e(t.feature.geometry),globalIdField:null,spatialReference:null,subtypeField:null,subtypes:null,timeInfo:null,typeIdField:null,types:null,timeReferenceUnknownClient:!1}));s.next(),l.entityStart(s.getDisplayId(),0),r.write(l,p,s,c,0),l.entityEnd()}return l.serialize().message}class u extends s{fetchDictionaryResourceImmediate(e){throw new Error("Method not implemented.")}fetchResourceImmediate(e){throw new Error("Method not implemented.")}enqueueRequest(e){throw new Error("Method not implemented.")}fetchEnqueuedResources(){throw new Error("Method not implemented.")}getResource(e){throw new Error("Method not implemented.")}}export{l as createTestMeshData};
