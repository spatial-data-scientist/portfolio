/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.30/esri/copyright.txt for details.
*/
import{FeatureSymbologyDrawOrder as e}from"../../../enums.js";import{FeatureTechnique as s}from"../FeatureTechnique.js";import{getSelectionDefines as t,resolveDynamicUniforms as r,getFeatureUniforms as a,isHittest as i,getFeaturePipelineState as o}from"../featureTechniqueUtils.js";import{TechniqueType as n}from"../TechniqueType.js";import{TextShader as u}from"./TextShader.js";class m extends s{constructor(){super(...arguments),this.type=n.Text,this.shaders={geometry:new u},this.symbologyPlane=e.TEXT}render(e,s){const{context:n,painter:u}=e,m=t(e),d=s.instance.getInput(),f={shader:this.shaders.geometry,uniforms:{...r(e,s.target,d.uniforms),...a(e,s.target),mosaicInfo:u.textureManager.getMosaicInfo(n,s.textureKey)},defines:{...m,isHaloPass:!1,isBackgroundPass:!0,isLabel:!1},optionalAttributes:d.optionalAttributes,useComputeBuffer:i(e)};u.setShader(f),u.setPipelineState(o(e)),u.submitDraw(e,s),u.setShader({...f,defines:{...m,isHaloPass:!0,isBackgroundPass:!1,isLabel:!1}}),u.submitDraw(e,s),u.setShader({...f,defines:{...m,isHaloPass:!1,isBackgroundPass:!1,isLabel:!1}}),u.submitDraw(e,s)}}export{m as TextTechnique};
