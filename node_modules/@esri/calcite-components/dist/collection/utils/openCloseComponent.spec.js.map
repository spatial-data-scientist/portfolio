{"version":3,"file":"openCloseComponent.spec.js","sourceRoot":"","sources":["../../../src/utils/openCloseComponent.spec.ts"],"names":[],"mappings":"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","sourcesContent":["import { createTransitionEventDispatcher, TransitionEventDispatcher } from \"../tests/spec-helpers/transitionEvents\";\nimport { mockGetComputedStyleFor } from \"../tests/spec-helpers/computedStyle\";\nimport * as openCloseComponent from \"./openCloseComponent\";\n\nconst { onToggleOpenCloseComponent } = openCloseComponent;\n\ndescribe(\"openCloseComponent\", () => {\n  describe(\"toggleOpenCloseComponent\", () => {\n    let dispatchTransitionEvent: TransitionEventDispatcher;\n\n    beforeEach(() => {\n      jest.spyOn(openCloseComponent, \"internalReadTask\").mockImplementation((task) => task(1337));\n      dispatchTransitionEvent = createTransitionEventDispatcher();\n    });\n\n    afterEach(() => {\n      jest.resetAllMocks();\n    });\n\n    it(\"emits beforeOpen/beforeClose events when the transition starts and open/close events when the transition is done\", async () => {\n      const transitionEl = window.document.createElement(\"div\");\n      const testProp = \"opacity\";\n      const testDuration = \"0.5s\";\n      const testTransition = `${testProp} ${testDuration} ease 0s`;\n\n      transitionEl.style.transition = testTransition;\n      window.document.body.append(transitionEl);\n      mockGetComputedStyleFor(transitionEl, {\n        transition: testTransition,\n        transitionDuration: testDuration,\n        transitionProperty: testProp,\n      });\n\n      const emittedEvents: string[] = [];\n      const fakeOpenCloseComponent = {\n        el: document.createElement(\"div\"),\n        open: true,\n        openTransitionProp: \"opacity\",\n        transitionEl,\n        onBeforeOpen: jest.fn(() => emittedEvents.push(\"beforeOpen\")),\n        onOpen: jest.fn(() => emittedEvents.push(\"open\")),\n        onBeforeClose: jest.fn(() => emittedEvents.push(\"beforeClose\")),\n        onClose: jest.fn(() => emittedEvents.push(\"close\")),\n      };\n\n      onToggleOpenCloseComponent(fakeOpenCloseComponent);\n      expect(emittedEvents).toEqual([]);\n\n      dispatchTransitionEvent(transitionEl, \"transitionstart\", fakeOpenCloseComponent.openTransitionProp);\n      expect(emittedEvents).toEqual([\"beforeOpen\"]);\n\n      dispatchTransitionEvent(transitionEl, \"transitionend\", fakeOpenCloseComponent.openTransitionProp);\n      expect(emittedEvents).toEqual([\"beforeOpen\", \"open\"]);\n\n      fakeOpenCloseComponent.open = false;\n\n      onToggleOpenCloseComponent(fakeOpenCloseComponent);\n      expect(emittedEvents).toEqual([\"beforeOpen\", \"open\"]);\n\n      dispatchTransitionEvent(transitionEl, \"transitionstart\", fakeOpenCloseComponent.openTransitionProp);\n      expect(emittedEvents).toEqual([\"beforeOpen\", \"open\", \"beforeClose\"]);\n\n      dispatchTransitionEvent(transitionEl, \"transitionend\", fakeOpenCloseComponent.openTransitionProp);\n      expect(emittedEvents).toEqual([\"beforeOpen\", \"open\", \"beforeClose\", \"close\"]);\n    });\n  });\n});\n"]}